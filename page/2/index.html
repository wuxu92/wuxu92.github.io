<!doctype html>
<html class="theme-next ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="h7BaHlqi6VjlciSt0RF-KHgIXZcGfx3L3gyQ9qfx_ek" />










  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="wuxu, Golang, C, CPP, CS, PHP, " />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />






<meta name="description" content="Wu Xu的个人博客">
<meta property="og:type" content="website">
<meta property="og:title" content="Wu Xu">
<meta property="og:url" content="http://blog.wuxu92.com/page/2/index.html">
<meta property="og:site_name" content="Wu Xu">
<meta property="og:description" content="Wu Xu的个人博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Wu Xu">
<meta name="twitter:description" content="Wu Xu的个人博客">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: '',
    sidebar: 'hide',
    motion: false
  };
</script>

  <title> Wu Xu </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-72131273-1', 'auto');
  ga('send', 'pageview');
</script>





  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>
    <div class="bottomband"></div> <!-- add by wuxu -->
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Wu Xu</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">关注C、Go、C++、JavaScript和Rust</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
  <section id="posts" class="posts-expand">

    

    
    

    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/the-loomig-storm/" itemprop="url">
                  《暴雪降至》：不是罪案片
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2017-11-19T13:56:47+08:00" content="2017-11-19">
              2017-11-19
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/movie/" itemprop="url" rel="index">
                    <span itemprop="name">movie</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p><img src="/images/movie/looming-storm.jpg" alt="暴雪降至剧照"><br>吃完一堆垃圾食品，又写了几行代码之后，去看了这部把段奕宏送上东京电影节影帝的《暴雪降至》。</p>
<p>在之前就看了几篇短评，大部分无非是拿这部电影和韩国的《杀人回忆》做比较，是中国版的《杀人回忆》云云，但是看到海报就感觉这应该是部不错的片子，就买了附近最晚的一场，正好看完回家。</p>
<p>片子的开头是有点平庸的惯用手法，男主在第一镜以一个背影出场，没有人露脸，台词冷冰冰地带出故事。当然很多人乐于称道的对于男主人公名字“余国伟”的解释，算是第一个小亮点吧。从派出所出来，男主走在街上听到车的声音而回头等车的现身，漫长的等待之后，看到的却是10年前的自己，一个漂亮的剪切，故事正是开始了。有人说这个片子不会剪辑，真的是在搞笑，这个镜头扔他脸上。</p>
<p>这个片子一个很大的亮点就是各种伏笔、隐喻和前后呼应，比如刚出场男主老余的车坏了，自己推到案发现场，然后让徒弟小刘把车推回去这一个场景，到后面警察局的车也坏了，李警官让老余下去推车，李警官和老警察老张坐在车里。这两个镜组合起来就可以表达很多东西了吧。老余是一个厂子里抓小偷的保安科长，一心想进入体制内的警察局，老余的小徒弟一心想成为老余那样“神探”， 而警察局的李警官呢，估计是想早点调到市局、省局去，但是可惜他们的车都容易坏。这里有一个设计的很好的镜头，老余在后面推车，摄影机在车子里面往后面拍，仿佛我们是在车里的人，老余是外面的人，我们把老余扔到了外面。</p>
<p>还有一个场景，老警察推测凶手作案是先把受害者打晕绑在自行车上运送到案发地点，然后一个镜头切换，老余骑着自行车，把徒弟小刘的手绑在自己身上，这不就是爱森斯坦的一加一等于三？这里就暗示了小刘和那写被杀害的女性没有什么区别，而小刘被害凶手可以说就是老余，当然这里每个人可以有自己的解读，要说过分解读也没错。但是一个老警察描述的场景，一个拍摄的真实场景，两个直接对比冲撞之下，意义凸显：他们什么地方是一样的，什么地方是不一样的？肯定是为了要表现出一些东西的。这里也是整个片子很多伏笔中的一个。</p>
<p>刚开始看，段奕宏有点出戏，但是慢慢的就能感觉到段奕宏表演的技巧很强，很稳健，有时候会担心某个场景会崩塌，但是一转眼段奕宏就处理的非常好，怪不得可以拿到东京电影节的最佳男演员了。这样的演员就是基本不会失手的那种级别了，因为他不是局限于某一种类型某一类角色的演员了，有自己的一套表演方法，也就是说以后只要是段奕宏演的角色，就算剧本崩塌，他这个角色也应该是能撑起来的那种。</p>
<p>老余和燕子（江一燕）在理发店的几个场景是最好的几场戏。江一燕的演技有点不稳定，总的来说在理发店的戏是她发挥最好的地方了。还有就是在桥上的几个镜头，贯穿整个戏，天空总是阴着的，似乎永远不会停止的雨水，很少见到阳光，烟囱冒出浓烟，和人印象中的一样总蒙着一层灰的工厂，所有的人都是青黑色的雨衣，灰色的雨伞，灰色的工作服，黑色的鞋子，脏兮兮的街道和布满水坑的泥泞的马路；只有几处暖色调的景，一个是在燕子原来的住所，但那是一个进行皮肉交易的地方，在一个道德认为最肮脏的地方，却是全片暖色调最集中的地方；当然这可能并没有什么特别的意味，因为使用暖色调表现暧昧情调是惯用的手法，但是放在这个片子里面却有了意外的惊喜的效果了。</p>
<p>除了理发店的戏，就是老余和燕子在桥上的几个场景最喜欢了，天空仍旧是阴灰的，似乎没有下雨，但也没有放晴，云压的很低，老余仍然是灰色的衣服，一眼望去，城市是灰色的，房子都很老且破，老旧的火车开过，桥也是老旧的。但是燕子的衣服是暖色的，一次是黄色的线衣，一次是深红色的外套，很漂亮的对比。在这桥上还有全片最浪漫的一个错位镜头，可能很多人没有注意到，通过一个两人延长线上的机位的摄影，老余和燕子似乎拥抱在一起，并且燕子坐在桥墩上，位置偏高一点，这样就成了老余的头靠在了燕子的肩上，这肯定是一个特意设计的镜头，很浪漫是不是，但是一段蒙太奇剪辑回来之后，燕子像一片羽毛一样轻盈地倒身从桥上跳下去，下面是正疾驰而过的火车。这是全片最震撼、最大胆的一个镜头，看到这吓了一跳。</p>
<p>就电影工业水平而言，在工厂的那场追逐的戏可以担起重任，非常精彩。很少在国产电影中看到这样的，至少看起来很真实的工厂追逐的大场景戏码，除去精彩的追逐戏，这里也埋下了一个伏笔：凶手是一个身手矫健的人，和老余认定的“凶手”完全不可能是一个人，但是老余还是认定了那个宛如智障的话都说不清楚的人是凶手，这更加表现出了老余的迷失和注定的悲剧。片子还有很多的类似的细节，非常多有些也记不清楚了，以后出资源了可以再拉一遍。</p>
<p>还是要说一下和《杀人回忆》的事情，很多人都拿这部片子和《杀人回忆》对比，甚至说什么低配版，什么拙劣的模仿，什么段奕宏努力地要成为一个宋康昊，真是太搞笑了，这片子和《杀人回忆》就不是一类，要表现的主题都完全不一样，更不要说背景和角色设定，剧情推进各个方面的差异。非要说有一样的地方，雨多算一个，但是《暴雪降至》贯穿全片的阴雨，大半时间都在暴雨，这么大胆的设计就比《杀人回忆》走的更远了，而另一个相似的地方就是连环杀人的设定，这个并不能作为两个影片类同的依据不想多说。而《暴雪降至》明显比《杀人回忆》想要表现更多的东西，或者有不一样的东西，这些东西是和我们的环境、和当时的历史情节绑定在一起的。</p>
<p>且不说宋康昊除了在韩国自己的电影节拿奖拿到手软，在国际A类电影节的竞赛单元成就基本是零，连提名都没几个，段奕宏怎么说两个A类电影节影帝，宋说破天算个前辈而已，何以就段奕宏要努力地成为一个宋康昊。虽然几年前我也吹韩国电影，但是现在发现有的人吹的过分了；韩国电影就一个好：故事讲的好，拍一个大家看完觉得还不错的片子很容易，而国产的很多片子就是连故事都讲不好。但是要说高水平，格局和突破性，国产片不要虚的啊。</p>
<p>如果要说《暴雪降至》的缺点，那就是故事差点火候，就是没有那种很硬很惊艳的感觉，后期略显乏力，这似乎是所有国产电影的弱项，不过并不是说这个片子故事性不强，只是相对而言这一方面弱一点，总的来说瑕不掩瑜。还有一点是结局的处理有点可惜，本来老余背起包上了大巴车准备离开，但是大巴车熄火，天下起了雪，暴雪即将到来，是一个我非常喜欢的设计，有很多的暗示和隐喻在里面，如果体验过湖南2008年的那场大雪，估计能有更多的想法。但是最后一幕文字说明雪灾有多严重却有点突兀和多余，可能对没有经历过那场雪灾的观众是一个补充，但是这一幕的破坏性也很强的。</p>
<p>最后，不是所有看不懂的片子都是文艺片，不是说所有有警察和罪犯的片子都是罪案推理片。</p>
<blockquote>
<p>最近还在学习怎么看电影，如果你也感兴趣，推荐看看纪录片《电影史话》，在Bilibili有电影频道的国语配音版，网上也有原版的资源，还有经典的《认识电影》和《世界电影史》都是了解电影的入门书籍，都值得推荐。</p>
</blockquote>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/convert-all-gbk-files-to-utf8-md/" itemprop="url">
                  Conver all GBK files to UTF8
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2017-10-21T22:50:36+08:00" content="2017-10-21">
              2017-10-21
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p><em>水一篇水一篇，要不要发霉了</em><br>平时的整轨音乐文件作者在发布的时候使用的播放列表文件（cue/m3u/m3u8）大部分都是 BGK编码的，在qmmp播放时不能正确识别GBK编码的文件，之前都是用vscode一个个复制转码保存，今天处理歌神的一个合集时发现文件实在太多了，就想着用bash处理以下，发现非常简单的一个命令就能搞定了：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">while read -r f; do echo &quot;Processing $f...&quot;; iconv -f GBK -t utf8 -o &quot;$&#123;f%%cue&#125;utf8.cue&quot;  $f; done &lt;&lt;&lt; $(find ./ -name &apos;*.cue&apos;);</span><br><span class="line">`</span><br></pre></td></tr></table></figure>
<p>就是用iconv命令进行转码，上面的命令可以将当前目录下的所有 .cue 文件从 BGK 转码为 UTF8 并保存为一个带 .utf8.cue 的同目录下的文件，这样使用起来就很方便了。</p>
<p>虽然很简单也很水，但很好用啊。。。。</p>
<p>再附一个处理所有的的详细版(要排除了一些之前手动处理过的文件)：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#! /bin/bash</span><br><span class="line"></span><br><span class="line"># mydir=$(readlink -e `dirname $0`)</span><br><span class="line">skip_count=0</span><br><span class="line">work_count=0</span><br><span class="line"></span><br><span class="line">while read -r f; do</span><br><span class="line">    if [[ -n `echo &quot;$f&quot; | grep utf8` || -f &quot;$&#123;f%%cue&#125;utf8.cue&quot; || -f &quot;$&#123;f%%.cue&#125; utf8.cue&quot; ]]; then</span><br><span class="line">        echo &quot;skiping $f&quot;</span><br><span class="line">        skip_count=$((skip_count+1))</span><br><span class="line">        continue</span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">    echo &quot;Processing $f...&quot;</span><br><span class="line">    iconv -f GBK -t utf8 -o &quot;$&#123;f%%cue&#125;utf8.cue&quot; &quot;$f&quot;</span><br><span class="line">    work_count=$((work_count+1))</span><br><span class="line">done &lt; &lt;(find ./ -name &apos;*.cue&apos;)</span><br><span class="line"></span><br><span class="line">echo &quot;done: skipped: $skip_count, Processed: $work_count.&quot;</span><br></pre></td></tr></table></figure>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/terminal-terminology/" itemprop="url">
                  一个不错的终端工具：terminology
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2017-06-23T11:59:06+08:00" content="2017-06-23">
              2017-06-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>之前一直使用gnome自带的terminal，感觉也挺好用的，就是多开tab的时候有点丑，习惯了其实也没事，但是偶尔就是想换掉它。。更早的时候使用的 roxterm也是很好用的，但是不知道为什么从F23开始，border样式变得很奇怪，有一圈没法去掉的大边界。</p>
<p>找了好几次terminal替代品，昨天试了好几个，有 st, roxterm, terminology, ternimator,xfce terminal, guake 等，都各有好处，但是没有一个完全满意的。。。要是有早期的roxterm的效果也就很满意了。</p>
<p>其中有一个 terminology 挺有特色的，有很多华丽的效果，简直duang duang的，但是有几个问题，一个是配色调起来很诡异，一个是远程的tmux缩放窗口不能自动调节，多tab倒是挺好看的，非常适合我的土鳖审美，经过一顿调教，总算比较好用了。</p>
<ol>
<li>首先配色选 solarized， 但是这时文件夹和文件的配色很难分清楚，还得在 color项目下，重新选一下配色，并勾上 use</li>
<li>字体得慢慢调，粗看起来会比较糙，字体和大小都得慢慢调，现在用 droid sans mono(Regular) 14号字，感觉还可以</li>
<li>针对tmux的配色，需要在 behavior 选项勾选 set TERM to xterm-256color， 否则配色会很糟糕，勾选后似乎重启才能生效，关掉ring bell也在这里面</li>
<li>针对tmux自动缩放的问题，似乎需要kill session重新启一个session才正常，这个有点麻烦，不过弄好了就很舒服了</li>
<li>终端透明在video中调一下就ok了</li>
<li>还可以设置终端的壁纸，这功能看个人需要，感觉设置了有点非主流，还是朴素一点比较好</li>
<li>快捷键的设置很方便，也算是一个优势</li>
</ol>
<p>terminology还有样式看起来很舒服的分栏功能，比绝大部分终端软件的分栏看起来都舒服，但是习惯了tmux的分栏还是不推荐再使用terminal的分栏功能，太弱了，并且容易搞混。</p>
<p>一个截图：<br><img src="/images/linux/terminology.jpg" alt="terminology screenshot"></p>
<p><strong>一个致命的缺点</strong>： 不能使用fcitx-rime输入法，不能输入中文。测试了一下，ibus和fcitx都不能输入中文，如果有中文输入的需求。。。还是暂时不要用这个了，用gnome terminal吧。</p>
<p><strong>又一个致命缺点</strong> ：快捷键冲突，terminology本身有还多快捷键，没有快捷的禁用其快捷键的方法，而terminal本身的快捷键容易覆盖掉程序的快捷键，如vim和tmux的。发现没有办法在vim的panel之间快速跳转了，所以我放弃这个terminal了。</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/fedora-with-seamleass-virtualbox/" itemprop="url">
                  Fedora下运行无缝模式的VirtualBox
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2017-05-25T15:24:47+08:00" content="2017-05-25">
              2017-05-25
            </time>
          </span>

          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>昨天在Fedora下使用VirtualBox 5.1.20安装了 ThinPC 7，作为官方简化版win7果然很省资源也很稳定，安装非常顺利，装完后占用不到4G！分10G空间，安装了IE11，网易云音乐，有道词典，bqq，TIM， 微信，用了大半个月了，还能剩余4.2G，很赞，很赞。只放个图：</p>
<p><img src="/images/linux/fedora-with-seamless-virtualbox.jpg" alt="looop"></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/tsocks-usage/" itemprop="url">
                  使用tsocks让程序走socks代理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2017-02-08T22:07:43+08:00" content="2017-02-08">
              2017-02-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>很多时候，我们需要让联网程序走代理才能正常工作，但是命令行工具的代理设置通常比较麻烦，不像浏览器一样有一个设置界面，通常通过设置环境变量<code>HTTP_PROXY</code>来实现，有的工具通过配置文件或者命令行参数也可以实现。</p>
<p>但是这常见的多数是针对http代理的，而我们的特殊网络环境下使用socks5代理很常见的，而要走socks代理的话就更麻烦了。像有时候要从github clone项目的时候，git的socks代理就非常麻烦，在windows下可以用全局代理工具去实现，在Linux下也需要一个方便的全局代理的工具。</p>
<p>tsocks（transparent socks）就可以满足我们的需求，tsocks可以方便地配置针对目的ip的代理服务器，可以将http请求代理到socks服务器，有方便的开关控制。在Fedora下执行<code>sudo dnf install tsocks</code>就可以了，但是默认安装的没有将配置文件拷贝到<code>/etc/</code>目录下。需要手动拷贝一下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo cp /usr/share/doc/tsocks/tsocks.conf.complex.example /etc/tsocks.conf</span><br></pre></td></tr></table></figure>
<p>这样就可以了，可以在里面配置path和server的信息，配置项目都有说明吗，比较好懂。</p>
<p>使用的话，直接运行<code>tsocks</code>会启动一个走代理的shell，在这个shell里面运行的命令会根据配置文件的配置走socks代理了，<code>Ctrl+d</code>或者<code>exit</code>退出该shell就回到正常shell了。也可以直接在 tsocks 后面直接加要运行的命令， 如 <code>tsocks git clone git@github.com:***/**</code> 这样git就能走socks代理了。</p>
<p>常见的命令<code>tsocks show</code>查看当前shell是否有tsocks代理，<code>tsocks on|off</code>开关tsocks。</p>
<p>配合shadowsocks就可以实现几乎任意程序的自由上网了。</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/jp-dramas-of-jan-2017/" itemprop="url">
                  日剧杂项
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2017-01-29T21:19:23+08:00" content="2017-01-29">
              2017-01-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/life/" itemprop="url" rel="index">
                    <span itemprop="name">life</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <p>最近新开播了好几部日剧，前几天闲着追了三部，都是追主演去的，感觉都还可以，分别是木村和竹内结子姐姐主演的医疗剧《A Life~ 深爱的人》，松隆子女神和满岛光主演的音乐剧《四重奏》还有吉高由里子和荣仓奈奈主演的《东京白日梦女》。</p>
<p>这三部剧到现在都出了两集， 得益于强大的编剧坂元裕二大神主笔，《四重奏》虽然是音乐剧的基调，但是故事性似乎远超其他两部剧。《A Life》虽然卡司阵容突破天际，除了木拓和竹内两人多年后重新合作，还有像浅野忠信这样的大牌，及川光博、木村文乃这样的准一线做配角，这阵容强大到可怕，但是到现在为止，这部剧收获的评价并没有想想的那么好，或者说故事没有期待的那么吸引人，而《东京白日梦女》见仁见智，看惯了这类剧的人可能会觉得情节有些老套，而新看的人可能会觉得好多台词可以记笔记了。</p>
          <div class="post-more-link text-center">
            <a class="btn" href="/jp-dramas-of-jan-2017/" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/map-capslock-to-esc/" itemprop="url">
                  Linux将CapsLock映射为额外的Escape
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2017-01-25T12:28:14+08:00" content="2017-01-25">
              2017-01-25
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <p>大写锁定键是一个没有什么用的按键，一般需要大写输入习惯使用 Shift加字母实现，很多时候一不小心开了大写锁定没有发现还会导致输入错误，所以我的机器的大写锁定都是映射到Esc键的，习惯了之后会发现这是一个非常有用的设置，顺手，能提高效率。</p>
<p>在windows下可以用软件写注册表实现，并且操作一次后就不需要管了，一直工作很好，但在我的Fedora上用之前的方法，一种是通过gnome-tweak-took的type分类里面有一个设置项可以设置capslock的功能，另一种方式是使用dconf-editor方式，设置 <code>org.gnome.desktop.input-sources xkb-options</code>的值为 <code>[&#39;caps:escape&#39;]</code>。这两种方式的底层实现应该是同一种方式，在升级到 Fedora 25之后，这种设置偶尔会失效，打开一次 gnome-tweak-tool就会正常一段时间，然后又失效了。<br>
          <div class="post-more-link text-center">
            <a class="btn" href="/map-capslock-to-esc/" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/fstab-mount-ntfs-with-permission/" itemprop="url">
                  fstab自动挂载ntfs分区并设置权限
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2017-01-14T10:09:36+08:00" content="2017-01-14">
              2017-01-14
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>由于是Windows和Fedora的双系统，在fedora下需要挂载Windows下的几个分区，如果每次手动挂载实在太麻烦，可以在fstab里面配置自动分区信息，这样可以在开机的时候自动挂载这些分区了。</p>
<p>最开始的时候，使用下面的几行配置：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/dev/sda2 /run/media/wuxu/Windows ntfs defaults 1 2</span><br><span class="line">/dev/sda2 /run/media/wuxu/bin ntfs defaults 1 2</span><br></pre></td></tr></table></figure>
<p>但是这样挂载的分区使用默认的权限，也就是用户和组都是root，权限则是777，这在很多时候比较麻烦，比如一个带可执行权限的文本文件。我是配置的在打开带执行权限的文本文件时询问是否执行，实际上在Windows分区下的文件我只需要读写就可以了，这时可以如下配置权限：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/dev/sda2 /run/media/wuxu/bin ntfs defaults,uid=1000,gid=1000,dmask=022,fmask=111 1 2</span><br></pre></td></tr></table></figure>
<p>其中uid和gid是你用户的id，可以通过<code>id -u</code>和<code>id -g</code>查看，dmask是目录权限掩码，注意是掩码而不是权限，真正的权限是 7减去掩码位，022对应的是755，即rwxr-xr-x。注意文件夹需要提供x权限才能进入。fmask是文件权限，配置为111取消可执行权限。</p>
<p>如上即可自动挂载并配置好Windows分区的权限了，也可以根据需要配置为其他权限。</p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/first-week-of-2017/" itemprop="url">
                  2017年第一周，两部电影，两本书，两部SP
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2017-01-09T13:53:15+08:00" content="2017-01-09">
              2017-01-09
            </time>
          </span>

          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <p>2017年的第一周已经结束了，还没准备写年终总结或者新年规划之类的，毕竟我们是过农历新年的，还有半个多月可以拖呢。</p>
<p>这一周看了两部电影《一个勺子》和《我不是王毛》，都是小成本优秀电影，其中《我不是王毛》是我觉得这两年最好的华语电影之一了，可以说是少见的教科书级别的黑色幽默电影。看了两本书《许三观卖血记》和《活着》，这两本还是京东618的时候买的，某天下午随手抄一本看了，太精彩了，一气呵成的故事，比起一下午看不到100页的某意识流大作，《卖血》只一个下午就看完了，《活着》一晚上看完了，余华的小说看起来非常轻松，没有任何负担。补了两部日剧SP，老剧《白线流》去年年底补完的（那时的酒井美纪真是太漂亮了），然后这周补了《白线流 二十岁的风》和《白线流 旅立的诗》。这两部SP并不是多么优秀，但也有些有意思的内容可以写一下。</p>
<h2 id="电影"><a href="#电影" class="headerlink" title="电影"></a>电影</h2><p>在国产烂大片横扫影院的时候，其实这两年并不乏优秀的国产电影，只是大多数可以称为优秀的国产电影都是小成本文艺类电影，没有大牌导演和演员，没有成规模的营销和炒作，院线也不给多少排片，甚至根本上不去大荧幕，有的根本就不是为大荧幕拍的。<br>
          <div class="post-more-link text-center">
            <a class="btn" href="/first-week-of-2017/" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/update-to-fedora-25-with-wayland/" itemprop="url">
                  更新到Fedora 25 with wayland
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2016-12-29T20:31:13+08:00" content="2016-12-29">
              2016-12-29
            </time>
          </span>

          

          
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>毕业答辩完之后，时间也比较多了，前几天把很久没用的Fedora upgrade到了 25。 Fedora 25是第一个默认用wayland替代了X的发行版，这个改动还是很大的，也是比较有风险的。</p>
<p>在F24中wayland是一个可选的显示服务，曾经尝试过几次，那个时候的wayland还非常不好用，桌面运行gnome会卡卡的，并且很多插件和软件都用不了。这次升级后的wayland可用性已经得到极大提升，虽然还有一些小问题，但是日常使用已经没有问题了。</p>
<p>Fedora官方给出了方便的<a href="https://Fedoraproject.org/wiki/DNF_system_upgrade" target="_blank" rel="noopener">升级方法</a>，推荐使用 dnf plugin 方式在线升级，核心方法就4条命令：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">sudo dnf upgrade --refresh</span><br><span class="line">sudo dnf install dnf-plugin-system-upgrade</span><br><span class="line">sudo dnf system-upgrade download --refresh --releasever=25</span><br><span class="line">sudo dnf system-upgrade reboot</span><br></pre></td></tr></table></figure>
<p>更新和dnf update差不多，不过会在重启的时候安装更新，我的系统大概有7000个更新，花了半个小时的样子，非常顺利更新完之后重启，进入新系统。</p>
<p>更新的系统不会损失原来的文件和配置，gnome的插件也都还在，使用terminal的时候，菜单有一点点卡顿，使用一段时间后不太明显了。大部分的软件都正常运行。</p>
<p>几个运行异常的地方：</p>
<ol>
<li>原来配置好的 QT5 输入法问题，升级后在为知笔记不能使用搜狗输入法，其他软件的输入法没有问题。</li>
<li>显示器自动色温调节软件，f.lux和redshift都不能运行，因为色温调节依赖X提供的接口，wayland还没有适配</li>
<li>下拉的关机按钮还是有可能导致系统卡顿，这在x做服务的时候就存在，应该是gnome的bug</li>
</ol>
<p>不知道是不是更新到了wayland的错觉，整体感觉更流畅了，到现在也没有崩溃的情况，值得更新到Fedora 25。</p>
<p>随手截个图看下效果：<br><img src="/images/movie/fedora-25.jpg" alt="Fedora screensnap"></p>

            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    

  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



        </div>

        


        

      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="/images/avatar.jpg" alt="wuxu" itemprop="image"/>
          <p class="site-author-name" itemprop="name">wuxu</p>
        </div>
        <p class="site-description motion-element" itemprop="description">Wu Xu的个人博客</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">178</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">25</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">148</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/wuxu92" target="_blank">
                  
                    <i class="fa fa-github"></i> GitHub
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/wuxu92" target="_blank">
                  
                    <i class="fa fa-twitter"></i> Twitter
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/kiwidock" target="_blank">
                  
                    <i class="fa fa-weibo"></i> Weibo
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://douban.com/people/wuxu92" target="_blank">
                  
                    <i class="fa fa-douban"></i> Douban
                  
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.zhihu.com/people/wuxu92" target="_blank">
                  
                    <i class="fa fa-zhihu"></i> Zhihu
                  
                </a>
              </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element" itemprop="license">
            <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2014 - 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wuxu</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    
    

  


  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  

  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  

  
  

</body>
</html>
