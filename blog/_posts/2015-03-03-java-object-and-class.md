---
layout: post
title: 对象与类
---

虽然面向对象有被过度推崇的嫌疑（有太多不需要使用面向对象的场景被强行套入面向对象的思想），但是面向对象是一种非常重要的编程思想，应该根据实际情况合理选择是否使用面向对象编程。

### 面向对象程序设计的基础 ###
>OOP中，不必关系对象的具体实现，只要能满足用户的需求即可，这符合开放与封闭的思想。
>
>传统结构化程序设计的思想是：算法+数据结构=程序。OOP中数据是第一位的，然后再考虑对数据的操作。

#### 类与对象 ####
名词：

1. 封装：encapsulation
2. 类，class
3. 构造， construct
4. 实例， instance
5. 实例域，instance field
6. 方法， method
7. 继承， inheritance
8. 对象的行为（behavior），状态（state）和标识（identity）

类之间的关系：依赖，聚合与继承

1. **依赖**： use-a，如果一个类的方法操纵另一个类的对象，就说一个类依赖于另一个类。应该尽可能减少类之间的依赖关系。
2. **聚合**： has-a，如果一个类包含一些另外一个类的对象，则称为聚合。也叫做关联
3. **继承**： is-a，一种扩展的关系

> 一个对象变量并没有实际包含一个对象，而仅仅引用一个对象。
> 局部变量**不会**自动初始化为null，必须调用new、赋值或者设置为null进行初始化

> Tips：相比与Date类，日历类(GreogorianCalendar)是一个更好的选择

#### 使用多个文件的编译 ####
使用多个类/多个文件的情况是很常见的，在使用命令行编译时，javac A，如果A.java使用了B类，编译器会查找B.class文件，如果没有则会查找B.java进行编译。

#### 构造器 ####
构造器是一个特殊的方法，构造器与类同名，且没有返回值。构造器总是伴随new操作一起调用。
#### 显示参数与隐式参数 ####
类的方法中，把this看作隐式参数，是参数列表的第一个参数。气候的是显式参数。在方法中调用属性**可以省略this**。
> C++ 中常在类的外面定义方法～～

### 静态与和静态方法 ###
**静态域**：如果将域定义为static，每个类中只有一个这样的域，而每一个对象对于所有的实例域却都有自己的一份拷贝。类的所有实例共享一个nextId。静态域属于类而不属于任何独立的对象。

**静态常量**：使用 static final 修饰的属性

> 静态常量域的内容不能被Java代码修改，但是可以被本地方法修改，比如System.out 是一个final域，但是System.setOut方法可以改变out域，因为这个方法是一个本地方法，不是Java语言实现的。

**静态方法**：与静态域相似，静态方法属于类而不属于单独的实例。静态方法只能访问静态域，而不能访问实例域和操作对象，即不能使用this关键字
> C 引入static关键字是为了表示推出一个块后依然存在的局部变量，后来用来表示不能被其他文件访问的全局变量和函数，C++和Java的含义更深一层了。

**常用静态方法来实现工厂方法**
> 每一个类都可以有一个main方法，这是常用于对类进行单元测试的技巧。

### 参数 ###
**Java总是采用按值调用**，即方法得到的是所有参数值的一个拷贝，这也意味着，方法不能修改传递给他的任何基本数据类型参数变量的内容。

对对象作为参数的调用也是对引用的拷贝，所以这里可能会导致一些奇怪的问题，可以修改对象的内容，但是交换对象实例的引用等就会失败，即一个方法不能让对象参数引用一个新的对象。

### 对象构造 ###
**重载（overloading）**: 重载在java中是非常重要的概念，当一个类中，多个方法有相同的名字、不同的参数，就产生了重载。
> 函数的签名（signature）包含且只包含函数的名称和**参数类型**，返回值不是签名的一部分。

**只有没有设计经验的程序员才会让域自动赋予默认值，正确的做法是显示的赋初值而不是依赖于系统默认值**

> 域与局部变量的初始化不同，必须明确的初始化局部变量的值，而如果没有初始化的类中的域，将会被初始化为默认值。

> 如果没有编写任何构造器，系统会提供一个无参构造器，如果程序编写了有参数的构造器，而没有无参构造器。则如果调用无参的构造器初始化会被视为非法。

黑魔法：在构造器中调用另一个构造器。如果构造器的**第一个语句形如this(...)**这个构造器将调用另外一个构造器。

**初始化块** Java允许使用初始化块来在构造函数之前执行初始化。这一块代码会在先运行，然后才运行构造器的主体部分。初始化块允许使用static关键字修饰。*但是初始化块并不推荐使用*。 **使用初始化块，可以编写一个没有main函数却能正常运行的程序**

构造器的具体处理步骤：

1. 所有数据域被初始化为默认值
2. 按照类声明中的次序，一次执行所有域初始化语句和初始化块
3. 如果构造器第一行调用了另一个构造器，则执行第二个构造器主体
4. 执行这个构造器的主题

### Java的包管理 ###

> 使用import导入包时，使用asterisk（*）通配符对程序 **没有影响**，因为这并不会导致事实上的类加载过程。明确导入需要的类，只是为了看代码就知道具体导入了哪些类。

**java的import和C/C++的#include没有共同之处**，因为java完全可以不用import， 而include不能避免。

可以使用**静态导入**来简化代码，静态导入的类可以省略类名而直接使用其静态方法和静态域

	import static java.lang.System.*;
	out.print("Hi hi");

将类放入包中：

	package com.example.wuxu

将包中的文件放到与完整报名匹配的子目录中，这样编译器将类文件也放在相同的目录结构中。**事实上，在编译器并不会检查目录结构，也就是说包中的源文件没有放在子目录也可以编译，但是这样编译的程序因为找不到类文件而不能运行**

可以使用-classpath(或者-cp)来置顶编译时的类路径。

### 文档注释 ###
常用的文档注释类型：

1. @author
2. @param
3. @return
4. @throws
5. @version
6. @since
7. @deprecated
8. @see
9. @link

常用注释HTML修饰符< em >, < code>,  < strong>, < img>等

### 类设计技巧 ###
1. 一定要保证数据私有
2. 一定要对数据初始化
3. 不要再类中使用过多的基本类型
4. 不要所有的域都需要独立的访问器或域更改器
5. 将职责过多的类进行分解
6. 类名和方法名要体现它们的职责

这些只是一些建议，实际上，该怎么做就怎么做吧，稍微考虑这些原则就可以了。

